---
const currentPath = Astro.url.pathname;

// Function to check if link is active
function isActive(href: string) {
  if (href === '/' && currentPath === '/') return true;
  if (href !== '/' && currentPath.startsWith(href)) return true;
  return false;
}
---

<header class="header" id="header" transition:name="header" transition:animate="none">
  <div class="container--header">
    <div class="header__container">
      <div class="header__left-group">
        <a href="/" class="header__logo">
          <div class="header__logo-img-wrapper">
            <img src="/img/Logo.webp" alt="Logo Zygo" class="logo-img" width="50" height="50" />
          </div>
          <div class="header__logo-text-col">
            <span class="logo-main"><span class="text-zy">ZY</span><span class="text-go">GO</span></span>
            <span class="logo-sub">SALUD FEMENINA</span>
          </div>
        </a>

        <!-- Mobile Toggle (Hamburger) - Moved here next to logo -->

      </div>

      <nav class="header__nav">
        <a href="/" class:list={['header__nav-link', { 'header__nav-link--active': isActive('/') }]}>
          Inicio
        </a>
        <a
          href="/servicios"
          class:list={['header__nav-link', { 'header__nav-link--active': isActive('/servicios') }]}
        >
          Servicios
        </a>
        <a
          href="/acerca-de"
          class:list={['header__nav-link', { 'header__nav-link--active': isActive('/acerca-de') }]}
        >
          Acerca de
        </a>
        <a
          href="/testimonios"
          class:list={['header__nav-link', { 'header__nav-link--active': isActive('/testimonios') }]}
        >
          Testimonios
        </a>
        <a
          href="/contacto"
          class:list={['header__nav-link', { 'header__nav-link--active': isActive('/contacto') }]}
        >
          Contacto
        </a>
      </nav>

      <div class="header__actions">
        <div class="header__social">
        <a
          href="https://www.facebook.com/profile.php?id=61564505164182"
          target="_blank"
          rel="noopener"
          aria-label="Facebook"
          style="color: #1877F2;"
        >
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M24 12.073C24 5.405 18.627 0 12 0S0 5.405 0 12.073C0 18.1 4.388 23.094 10.125 24V15.563H7.078V12.073H10.125V9.429C10.125 6.42 11.917 4.761 14.658 4.761C15.97 4.761 17.344 4.996 17.344 4.996V7.948H15.83C14.34 7.948 13.875 8.873 13.875 9.822V12.073H17.203L16.67 15.563H13.875V24C19.613 23.094 24 18.1 24 12.073Z" fill="#1877F2"/>
            <path d="M16.671 15.563L17.204 12.073H13.876V9.822C13.876 8.873 14.341 7.948 15.831 7.948H17.345V4.996C17.345 4.996 15.971 4.761 14.659 4.761C11.918 4.761 10.126 6.42 10.126 9.429V12.073H7.079V15.563H10.126V24C10.75 24.1 11.373 24.151 12.001 24.151C12.629 24.151 13.252 24.1 13.876 24V15.563H16.671Z" fill="white"/>
          </svg>
        </a>
        <a
          href="https://www.instagram.com/zygo.go/"
          target="_blank"
          rel="noopener"
          aria-label="Instagram"
          style="color: #E1306C;"
        >
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <radialGradient id="ig_grad_header" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(6 22) rotate(-90) scale(20 20)">
                <stop stop-color="#f09433"/>
                <stop offset="0.25" stop-color="#e6683c"/>
                <stop offset="0.5" stop-color="#dc2743"/>
                <stop offset="0.75" stop-color="#cc2366"/>
                <stop offset="1" stop-color="#bc1888"/>
              </radialGradient>
            </defs>
            <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0z" fill="url(#ig_grad_header)"/>
            <path d="M12 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8z" fill="url(#ig_grad_header)"/>
            <path d="M18.406 4.155a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z" fill="url(#ig_grad_header)"/>
          </svg>
        </a>
        <a href="https://www.tiktok.com/@zygo.go" target="_blank" rel="noopener" aria-label="TikTok" style="color: #000000;">
          <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <circle cx="12" cy="12" r="12" fill="#000000"/>
            <!-- Cyan layer (offset left) -->
            <path d="M12.525 5.2c.03 1.08.51 2.12 1.32 2.87a4.1 4.1 0 0 0 2.76 1.13v1.84a5.88 5.88 0 0 1-2.76-.72v4.66a4.54 4.54 0 0 1-1.33 3.23 4.5 4.5 0 0 1-3.23 1.34 4.54 4.54 0 0 1-3.23-1.34A4.5 4.5 0 0 1 4.7 15a4.54 4.54 0 0 1 1.33-3.23 4.5 4.5 0 0 1 3.23-1.34c.3 0 .6.03.89.09v1.88a2.66 2.66 0 0 0-.89-.15 2.66 2.66 0 0 0-1.9.79A2.66 2.66 0 0 0 6.57 15c0 .71.28 1.39.79 1.9a2.66 2.66 0 0 0 1.9.79 2.66 2.66 0 0 0 1.9-.79 2.66 2.66 0 0 0 .79-1.9V5.2h1.53z" fill="#25F4EE" transform="translate(-0.8, 0)"/>
            <!-- Red layer (offset right) -->
            <path d="M12.525 5.2c.03 1.08.51 2.12 1.32 2.87a4.1 4.1 0 0 0 2.76 1.13v1.84a5.88 5.88 0 0 1-2.76-.72v4.66a4.54 4.54 0 0 1-1.33 3.23 4.5 4.5 0 0 1-3.23 1.34 4.54 4.54 0 0 1-3.23-1.34A4.5 4.5 0 0 1 4.7 15a4.54 4.54 0 0 1 1.33-3.23 4.5 4.5 0 0 1 3.23-1.34c.3 0 .6.03.89.09v1.88a2.66 2.66 0 0 0-.89-.15 2.66 2.66 0 0 0-1.9.79A2.66 2.66 0 0 0 6.57 15c0 .71.28 1.39.79 1.9a2.66 2.66 0 0 0 1.9.79 2.66 2.66 0 0 0 1.9-.79 2.66 2.66 0 0 0 .79-1.9V5.2h1.53z" fill="#FE2C55" transform="translate(0.8, 0)"/>
            <!-- White layer (centered) -->
            <path d="M12.525 5.2c.03 1.08.51 2.12 1.32 2.87a4.1 4.1 0 0 0 2.76 1.13v1.84a5.88 5.88 0 0 1-2.76-.72v4.66a4.54 4.54 0 0 1-1.33 3.23 4.5 4.5 0 0 1-3.23 1.34 4.54 4.54 0 0 1-3.23-1.34A4.5 4.5 0 0 1 4.7 15a4.54 4.54 0 0 1 1.33-3.23 4.5 4.5 0 0 1 3.23-1.34c.3 0 .6.03.89.09v1.88a2.66 2.66 0 0 0-.89-.15 2.66 2.66 0 0 0-1.9.79A2.66 2.66 0 0 0 6.57 15c0 .71.28 1.39.79 1.9a2.66 2.66 0 0 0 1.9.79 2.66 2.66 0 0 0 1.9-.79 2.66 2.66 0 0 0 .79-1.9V5.2h1.53z" fill="#FFFFFF"/>
          </svg>
        </a>
      </div>

        <a href="/contacto" class="header__cta">
          Agenda tu Cita
          <svg width="18" height="18" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M1 15L15 1M15 1H5M15 1V11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </a>
      </div>

      <div class="header__mobile-actions">
        <!-- Social Icons Removed for Mobile as per user request -->

        <!-- Mobile Toggle (Hamburger) - Moved to right side -->


        <!-- Mobile Toggle (Hamburger) - Moved to right side -->
        <button class="header__mobile-toggle" aria-label="Abrir menú móvil" id="mobile-toggle">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="32" height="32">
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M4 6h16M4 12h16M4 18h16"></path>
          </svg>
        </button>
      </div>
    </div>
  </div>

  <!-- Mobile Menu - Static in HTML, hidden by default -->
  <nav class="header__mobile-menu" id="mobileMenu">
    <div class="header__mobile-content">
      <div class="header__mobile-links">
        <a href="/" class:list={[{ 'active': isActive('/') }]}>
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" class="nav-icon"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M9 22V12h6v10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
          Inicio
        </a>
        <a href="/servicios" class:list={[{ 'active': isActive('/servicios') }]}>
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" class="nav-icon"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
          Servicios
        </a>
        <a href="/acerca-de" class:list={[{ 'active': isActive('/acerca-de') }]}>
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" class="nav-icon"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><line x1="12" y1="16" x2="12" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><line x1="12" y1="8" x2="12.01" y2="8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
          Acerca de
        </a>
        <a href="/testimonios" class:list={[{ 'active': isActive('/testimonios') }]}>
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" class="nav-icon"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
          Testimonios
        </a>
        <a href="/contacto" class:list={[{ 'active': isActive('/contacto') }]}>
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" class="nav-icon"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
          Contacto
        </a>
      </div>

      <div class="header__mobile-footer">
        <a href="/contacto" class="header__mobile-cta">
          Agenda tu Cita
          <svg width="18" height="18" viewBox="0 0 16 16" fill="none"><path d="M1 15L15 1M15 1H5M15 1V11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </a>
        
        <div class="header__mobile-social">
           <a href="https://www.facebook.com/profile.php?id=61564505164182" target="_blank" aria-label="Facebook">
              <svg width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M24 12.073C24 5.405 18.627 0 12 0S0 5.405 0 12.073C0 18.1 4.388 23.094 10.125 24V15.563H7.078V12.073H10.125V9.429C10.125 6.42 11.917 4.761 14.658 4.761C15.97 4.761 17.344 4.996 17.344 4.996V7.948H15.83C14.34 7.948 13.875 8.873 13.875 9.822V12.073H17.203L16.67 15.563H13.875V24C19.613 23.094 24 18.1 24 12.073Z" fill="#1877F2"/>
                <path d="M16.671 15.563L17.204 12.073H13.876V9.822C13.876 8.873 14.341 7.948 15.831 7.948H17.345V4.996C17.345 4.996 15.971 4.761 14.659 4.761C11.918 4.761 10.126 6.42 10.126 9.429V12.073H7.079V15.563H10.126V24C10.75 24.1 11.373 24.151 12.001 24.151C12.629 24.151 13.252 24.1 13.876 24V15.563H16.671Z" fill="white"/>
              </svg>
           </a>
           <a href="https://www.instagram.com/zygo.go/" target="_blank" aria-label="Instagram">
              <svg width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <defs>
                  <radialGradient id="ig_grad_mobile_menu" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(6 22) rotate(-90) scale(20 20)">
                    <stop stop-color="#f09433"/>
                    <stop offset="0.25" stop-color="#e6683c"/>
                    <stop offset="0.5" stop-color="#dc2743"/>
                    <stop offset="0.75" stop-color="#cc2366"/>
                    <stop offset="1" stop-color="#bc1888"/>
                  </radialGradient>
                </defs>
                <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0z" fill="url(#ig_grad_mobile_menu)"/>
                <path d="M12 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8z" fill="url(#ig_grad_mobile_menu)"/>
                <path d="M18.406 4.155a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z" fill="url(#ig_grad_mobile_menu)"/>
              </svg>
           </a>
           <a href="https://www.tiktok.com/@zygo.go" target="_blank" aria-label="TikTok">
              <svg width="40" height="40" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <circle cx="12" cy="12" r="12" fill="#000000"/>
                <path d="M12.525 5.2c.03 1.08.51 2.12 1.32 2.87a4.1 4.1 0 0 0 2.76 1.13v1.84a5.88 5.88 0 0 1-2.76-.72v4.66a4.54 4.54 0 0 1-1.33 3.23 4.5 4.5 0 0 1-3.23 1.34 4.54 4.54 0 0 1-3.23-1.34A4.5 4.5 0 0 1 4.7 15a4.54 4.54 0 0 1 1.33-3.23 4.5 4.5 0 0 1 3.23-1.34c.3 0 .6.03.89.09v1.88a2.66 2.66 0 0 0-.89-.15 2.66 2.66 0 0 0-1.9.79A2.66 2.66 0 0 0 6.57 15c0 .71.28 1.39.79 1.9a2.66 2.66 0 0 0 1.9.79 2.66 2.66 0 0 0 1.9-.79 2.66 2.66 0 0 0 .79-1.9V5.2h1.53z" fill="#25F4EE" transform="translate(-0.8, 0)"/>
                <path d="M12.525 5.2c.03 1.08.51 2.12 1.32 2.87a4.1 4.1 0 0 0 2.76 1.13v1.84a5.88 5.88 0 0 1-2.76-.72v4.66a4.54 4.54 0 0 1-1.33 3.23 4.5 4.5 0 0 1-3.23 1.34 4.54 4.54 0 0 1-3.23-1.34A4.5 4.5 0 0 1 4.7 15a4.54 4.54 0 0 1 1.33-3.23 4.5 4.5 0 0 1 3.23-1.34c.3 0 .6.03.89.09v1.88a2.66 2.66 0 0 0-.89-.15 2.66 2.66 0 0 0-1.9.79A2.66 2.66 0 0 0 6.57 15c0 .71.28 1.39.79 1.9a2.66 2.66 0 0 0 1.9.79 2.66 2.66 0 0 0 1.9-.79 2.66 2.66 0 0 0 .79-1.9V5.2h1.53z" fill="#FE2C55" transform="translate(0.8, 0)"/>
                <path d="M12.525 5.2c.03 1.08.51 2.12 1.32 2.87a4.1 4.1 0 0 0 2.76 1.13v1.84a5.88 5.88 0 0 1-2.76-.72v4.66a4.54 4.54 0 0 1-1.33 3.23 4.5 4.5 0 0 1-3.23 1.34 4.54 4.54 0 0 1-3.23-1.34A4.5 4.5 0 0 1 4.7 15a4.54 4.54 0 0 1 1.33-3.23 4.5 4.5 0 0 1 3.23-1.34c.3 0 .6.03.89.09v1.88a2.66 2.66 0 0 0-.89-.15 2.66 2.66 0 0 0-1.9.79A2.66 2.66 0 0 0 6.57 15c0 .71.28 1.39.79 1.9a2.66 2.66 0 0 0 1.9.79 2.66 2.66 0 0 0 1.9-.79 2.66 2.66 0 0 0 .79-1.9V5.2h1.53z" fill="#FFFFFF"/>
              </svg>
           </a>
        </div>
      </div>
    </div>
  </nav>
</header>

<style>
  /* Mobile Actions Container */
  .header__mobile-actions {
    display: none; /* Hidden on desktop */
    align-items: center;
    gap: 0.8rem; 
    margin-left: auto; /* Push to right */
  }

  .header__left-group {
    display: contents; /* Desktop: Layout as normal */
  }

  .header__mobile-toggle {
    color: #E40345; /* Brand Red */
    display: none; /* Hidden on desktop */
    align-items: center;
    margin-right: 0;
    padding-right: 0;
  }

  .header__mobile-social-icons {
    display: flex;
    gap: 0.8rem;
    align-items: center;
  }
  
  /* Uniform styles for ALL icons in the header actions */
  .header__mobile-social-icons a,
  .header__mobile-call {
    /* Color handled inline */
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0;
    background: none !important; /* Remove backgrounds */
    box-shadow: none !important; /* Remove shadows */
    width: auto !important;
    height: auto !important;
    transition: transform 0.2s;
  }

  /* Ensure all SVGs are exactly the same size */
  .header__mobile-social-icons svg,
  .header__mobile-call svg,
  .header__mobile-toggle svg {
    width: 28px !important;
    height: 28px !important;
  }

  .header__mobile-social-icons a:hover,
  .header__mobile-call:hover,
  .header__mobile-toggle:hover {
    transform: scale(1.1);
    /* Colors handled inline for social, handled here for toggle/call overlap? No, removed text color enforcement on hover except toggle */
  }

  @media (max-width: 1024px) {
      .header__actions {
          display: none; /* Hide desktop social/CTA */
      }
      
      .header__nav {
          display: none; /* Hide desktop nav */
      }

      .header__mobile-actions {
          display: flex;
      }
      
      .header__mobile-toggle {
          display: flex; /* Show only on mobile */
      }

      .header__left-group {
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .header__logo {
        font-size: 1.25rem; /* Base size reset */
      }
      
      .logo-img {
          height: 70px; /* HUGE on Mobile */
      }
      
      .logo-main {
        font-size: 1.8rem; /* HUGE on Mobile */
      }
      
      .logo-sub {
        font-size: 0.6rem; /* Reduced from 0.8rem */
      }
  }

  .header__mobile-call:active {
    transform: scale(0.95);
  }

  @media (max-width: 768px) {
    .header__mobile-actions {
      display: flex;
    }
  }

  /* Mobile menu - hidden by default */
  /* Mobile menu - hidden by default */
  .header__mobile-menu {
    display: none;
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: linear-gradient(180deg, #FCE3F2 0%, #FCA4BD 100%);
    backdrop-filter: blur(15px);
    box-shadow: var(--shadow-lg);
    padding: 0; /* Reset padding to use flex container */
    z-index: 999;
    border-top: 1px solid rgba(255, 255, 255, 0.5);
    height: calc(100vh - 70px); /* Fallback */
    height: calc(100dvh - 70px); /* Dynamic viewport height adjusted for slimmer header */
    overflow-y: auto;
    padding-bottom: env(safe-area-inset-bottom); /* Safe area for newer iPhones */
  }

  /* Content Wrapper */
  .header__mobile-content {
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    min-height: 100%; /* Ensure it fills at least the container */
    padding: 2rem;
    padding-bottom: 4rem; /* Extra padding at bottom to ensure visibility */
  }

  .header__mobile-links {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  /* When open, show it */
  .header__mobile-menu--open {
    display: block !important;
    animation: slideDown 0.3s ease-out;
  }

  .header__logo {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    text-decoration: none;
  }

  .header__logo-text-col {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    line-height: 1;
  }

  .logo-main {
    font-size: 2.5rem; /* Increased from 2.2rem */
    font-weight: 700; /* Reduced from 800 to be less "fat" */
    letter-spacing: -0.02em;
    display: flex;
  }

  .logo-sub {
    font-family: var(--font-secondary); /* Manrope for tagline */
    font-size: 0.7rem; /* Slightly smaller for elegance */
    color: #E40345;
    font-weight: 500; /* Medium weight, not Bold */
    letter-spacing: 0.2em; /* Increased letter spacing */
    display: block; 
    margin-top: 2px; /* Positive margin to detach from ZYGO */
    white-space: nowrap;
    text-transform: uppercase;
  }

  .text-zy {
    color: #E40345;
  }

  .text-go {
    color: #DE5B87;
  }

  .logo-img {
    height: 95px; /* Increased from 85px */
    width: auto;
    flex-shrink: 0; /* Prevent squishing */
    object-fit: contain; /* Ensure aspect ratio */
    min-width: 95px; /* Force minimum width to prevent collapse */
  }

  .header__mobile-menu a.header__mobile-cta {
    border-bottom: none; /* No border for button */
  }

  .header__mobile-menu a:not(.header__mobile-cta):not(.header__mobile-social a) {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1.25rem 1rem; /* Bigger touch target */
    border-bottom: 1px solid rgba(138, 0, 33, 0.1);
    color: #8A0021;
    font-weight: 600;
    font-size: 1.1rem; /* Larger text */
    transition: all 0.2s ease;
  }

  .nav-icon {
    opacity: 0.8;
  }

  .header__mobile-menu a:not(.header__mobile-cta):not(.header__mobile-social a):last-child {
    border-bottom: none;
  }

  .header__mobile-menu a:not(.header__mobile-cta):not(.header__mobile-social a):hover {
    color: #D32F2F;
    padding-left: 1.5rem;
    background: rgba(255, 255, 255, 0.3);
    border-radius: 12px;
  }

  /* Mobile Footer Area */
  .header__mobile-footer {
    display: flex;
    flex-direction: column;
    gap: 2rem;
    margin-top: 2rem;
    border-top: 1px solid rgba(138, 0, 33, 0.1);
    padding-top: 2rem;
  }

  /* Mobile CTA Button */
  .header__mobile-cta {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 0.75rem;
    background: #8A0021;
    color: white !important;
    padding: 1rem;
    border-radius: 99px;
    font-weight: 700;
    font-size: 1.1rem;
    text-decoration: none;
    box-shadow: 0 4px 15px rgba(138, 0, 33, 0.2);
    transition: transform 0.2s;
  }

  .header__mobile-cta:hover {
    transform: scale(1.02);
    background: #72001b;
  }

  /* Social Icons */
  .header__mobile-social {
    display: flex;
    justify-content: center;
    gap: 1.5rem;
  }

  .header__mobile-social a {
    display: flex;
    align-items: center;
    justify-content: center;
    width: auto !important;
    height: auto !important;
    background: none !important; /* FORCE NO BACKGROUND */
    border-radius: 0 !important; /* FORCE NO ROUNDED CONTAINER */
    color: inherit !important;
    box-shadow: none !important;
    border: none !important;
    padding: 0 !important;
    transition: transform 0.2s;
  }

  .header__mobile-social a:hover,
  .header__mobile-social a:focus,
  .header__mobile-social a:active {
    transform: translateY(-3px) scale(1.1);
    background: none !important; /* FORCE NO BACKGROUND ON HOVER */
    filter: brightness(1.15);
  }

  /* HIDE mobile menu on desktop completely */
  @media (min-width: 768px) {
    .header__mobile-menu,
    .header__mobile-menu--open {
      display: none !important;
    }
  }

  @keyframes slideDown {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>

<script>
  // Header scroll behavior
  function initHeader() {
    const header = document.querySelector('.header');
    if (!header) return;

    window.addEventListener('scroll', () => {
      const currentScroll = window.pageYOffset;
      if (currentScroll > 100) {
        header.classList.add('header--scrolled');
      } else {
        header.classList.remove('header--scrolled');
      }
    });
  }

  // Mobile menu toggle - GSAP Refactored
  import gsap from 'gsap';

  function initMobileMenu() {
    const toggle = document.getElementById('mobile-toggle');
    const mobileMenu = document.getElementById('mobileMenu');
    if (!toggle || !mobileMenu) return;

    // Prevent duplicate listeners
    const newToggle = toggle.cloneNode(true) as HTMLElement;
    toggle.parentNode?.replaceChild(newToggle, toggle);

    // Estado inicial visual
    gsap.set(mobileMenu, { display: 'none', y: -20, opacity: 0 });

    let isOpen = false;
    let mm = gsap.matchMedia();

    newToggle.addEventListener('click', (e) => {
      e.stopPropagation();
      isOpen = !isOpen;

      mm.add("(max-width: 768px)", () => {
        if (isOpen) {
          // Open animation (Bouncy!)
          gsap.to(mobileMenu, { 
            display: 'block', 
            y: 0, 
            opacity: 1, 
            duration: 0.8, 
            ease: "elastic.out(1, 0.75)",
            overwrite: true 
          });
          mobileMenu.classList.add('header__mobile-menu--open'); // Keep for safety/styling
        } else {
          // Close animation
          gsap.to(mobileMenu, { 
            y: -20, 
            opacity: 0, 
            duration: 0.4, 
            ease: "power2.in",
            onComplete: () => gsap.set(mobileMenu, { display: 'none' }),
            overwrite: true
          });
          mobileMenu.classList.remove('header__mobile-menu--open');
        }
      });

      // Update Icon
      newToggle.innerHTML = isOpen
        ? '<svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>'
        : '<svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>';
    });

    // Close on link click
    mobileMenu.querySelectorAll('a').forEach(link => {
      link.addEventListener('click', () => {
        isOpen = false;
        gsap.to(mobileMenu, { 
          y: -20, 
          opacity: 0, 
          duration: 0.3, 
          onComplete: () => gsap.set(mobileMenu, { display: 'none' }) 
        });
        mobileMenu.classList.remove('header__mobile-menu--open');
        // Reset icon
        newToggle.innerHTML = '<svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>';
      });
    });

    // Close on outside click
    document.addEventListener('click', (e) => {
      if (isOpen && !mobileMenu.contains(e.target as Node) && !newToggle.contains(e.target as Node)) {
        isOpen = false;
        gsap.to(mobileMenu, { 
          y: -20, 
          opacity: 0, 
          duration: 0.3,
          onComplete: () => gsap.set(mobileMenu, { display: 'none' })
        });
        mobileMenu.classList.remove('header__mobile-menu--open');
        newToggle.innerHTML = '<svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>';
      }
    });
  }

  initHeader();
  initMobileMenu();

  document.addEventListener('astro:page-load', () => {
    initHeader();
    initMobileMenu();
  });
</script>
